# Two kinds of rules:
#
# 1. @include pattern
# Asterisk ('*') means any string (including the empty string). '*.' is automatically prepended. ':*' is automatically appended unless the rule contains a colon (':').
# To block a domain without blocking all its subdomains, use a regex rule (see below).
#
# 2. Regular expression
# If a rule starts and ends with a slash ('/'), it is treated as a (Python) regex.
# Note that the string to match against contains both a host and a port, e.g. 'example.com:443', and that the regex is used verbatim (i.e. you have to explicitly provide '^' etc if desired). The only exception is that the case-insensitivity flag ('?i') is automatically added.
# Be careful with '$': '/site.com$/' will never match, because it will only be used to check strings like 'site.com:80'.
#
# EXAMPLES:
#
# --- RULE ---------- MAKES MITMPROXY IGNORE -----------------------------------
#     site.com        site.com and x.site.com
#     api.site.com    api.site.com and x.api.site.com, but not y.site.com
#     *cdn.net        cdn.net, fbcdn.net and x.fbcdn.net, but not cdn.net.com
#     site.com:80     site.com:80 and x.site.com:80, but not site.com:443
#     /cdn\./         fbcdn.net, cdn.site.com, cdn.x.site.com, but not cdna.com
#     /^site\.com:/   site.com, but not x.site.com, mysite.com or site.com.net
#
# Anything from a '#' until the end of the line is ignored, as well as leading and trailing whitespace.

# Applications that cannot connect through mitmproxy:
    itunes.apple.com           # App Store
    xp.apple.com               # App Store
    *.apps.apple.com           # App Store
    *.mzstatic.com             # App Store
    graph.facebook.com         # Messenger
    api.facebook.com           # Messenger
    edge-mqtt.facebook.com     # Messenger
    slack.com                  # Slack
    api*.dropbox.com           # Dropbox app
    bolt.dropbox.com           # Dropbox app
    ls.apple.com               # Apple services
    metrics.icloud.com         # Apple services
    *.crashlytics.com          # Crashlytics error reporting
    twimg.com                  # Twitter
    ap.spotify.com             # Spotify app
    wg.spotify.com             # Spotify app
    api.branch.io              # Branchâ„¢ deep links

# Traffic irrelevant to Userscript Proxy:
    /cdn\./
    akamai*.net                # Akamai CDN
    googleusercontent.com      # Google CDN
    clients*.google.com        # Google Maps etc
    googleapis.com             # Google APIs
    i.ytimg.com                # YouTube thumbnails
    *.googlevideo.com          # YouTube video content
    s.youtube.com              # YouTube stats
    api.twitch.tv              # Twitch app metadata
    ttvnw.net                  # Twitch video content
    /^149\.154\.16[4-7]\.\d+:/ # Telegram Messenger Network
    audio-fa.spotify.com       # Spotify audio content
    slack-msgs.com             # Slack app
